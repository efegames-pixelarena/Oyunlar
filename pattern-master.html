<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
<title>Pattern Master PRO</title>

<style>
    *{
        margin:0; padding:0; box-sizing:border-box;
        font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
        -webkit-tap-highlight-color:transparent;
        user-select:none; touch-action:manipulation;
    }

    body {
        background:#050510; color:white; display:flex; flex-direction:column;
        align-items:center; justify-content:center; height:100vh; overflow:hidden;
        transition: background .2s;
    }

    /* --- PROFESYONEL ARKA PLAN ANƒ∞MASYONU --- */
    .bg-animation {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        z-index: -1; overflow: hidden; background: radial-gradient(circle at center, #1a1a3a 0%, #050510 100%);
    }
    .orb {
        position: absolute; width: 300px; height: 300px;
        background: radial-gradient(circle, rgba(79, 209, 255, 0.1) 0%, transparent 70%);
        border-radius: 50%; animation: float 15s infinite alternate ease-in-out;
    }
    .orb-1 { top: -50px; left: -50px; animation-duration: 18s; }
    .orb-2 { bottom: -50px; right: -50px; background: radial-gradient(circle, rgba(255, 0, 200, 0.1) 0%, transparent 70%); animation-duration: 22s; }
    
    @keyframes float {
        0% { transform: translate(0, 0) scale(1); }
        100% { transform: translate(50px, 80px) scale(1.2); }
    }

    /* EFEKTLER */
    .flash { background:#ffffff !important; }
    .shake { animation: shakeAnim .35s ease; }
    @keyframes shakeAnim {
        0%, 100% {transform:translateX(0);}
        20%, 60% {transform:translateX(-8px);}
        40%, 80% {transform:translateX(8px);}
    }

    .top-bar {
        position:fixed; top:0; width:100%; height:55px; display:flex;
        align-items:center; justify-content:center;
        background:rgba(26, 42, 108, 0.8); backdrop-filter: blur(10px);
        box-shadow:0 4px 15px rgba(0,0,0,0.45); z-index:100;
    }

    .brand {
        font-size:18px; font-weight:800; letter-spacing:2px;
        background:linear-gradient(90deg,#00f5ff,#ff00c8);
        background-size:200% auto; -webkit-background-clip:text;
        -webkit-text-fill-color:transparent; animation:shine 3s linear infinite;
    }
    @keyframes shine { to { background-position:200% center; } }

    .game-wrapper {
        margin-top:55px; display:flex; flex-direction:column;
        align-items:center; justify-content:center; height:calc(100vh - 55px);
        position: relative; z-index: 1;
    }

    #info { margin-bottom:20px; text-align:center; opacity:.9; font-weight:bold; letter-spacing: 1px;}
    
    #grid {
        display:grid; grid-template-columns:repeat(2,125px);
        grid-template-rows:repeat(2,125px); gap:20px; margin-bottom:25px;
    }
    #grid.disabled { pointer-events: none; }

    /* --- BUTON PROFESYONEL ANƒ∞MASYON --- */
    .btn {
        position: relative; display:flex; align-items:center; justify-content:center;
        font-size:40px; border-radius:30px; cursor:pointer;
        transition: .2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        background: rgba(26, 26, 46, 0.8); border: 2px solid rgba(255,255,255,0.1);
        overflow: hidden;
    }

    /* Ripple Efekti Hazƒ±rlƒ±ƒüƒ± */
    .btn::after {
        content: ""; position: absolute; width: 100%; height: 100%;
        background: rgba(255,255,255,0.2); opacity: 0; transform: scale(0);
        transition: 0.3s ease-out; border-radius: inherit;
    }
    .btn:active::after { transform: scale(2); opacity: 1; transition: 0s; }

    .neon-up { color:#00f5ff; }
    .neon-right { color:#ff00c8; }
    .neon-left { color:#00ff88; }
    .neon-down { color:#ffaa00; }

    /* Aktifle≈üme Efekti */
    .active {
        background: #fff !important;
        color: #000 !important;
        transform: scale(1.15);
        box-shadow: 0 0 50px currentColor;
        z-index: 2;
    }

    /* Buton Yanƒ±p S√∂nme Halkasƒ± */
    .active::before {
        content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
        border-radius: inherit; border: 4px solid currentColor;
        animation: pulseRing 0.5s ease-out;
    }

    @keyframes pulseRing {
        0% { transform: scale(1); opacity: 1; }
        100% { transform: scale(1.8); opacity: 0; }
    }

    .wrong { background: #ff0000 !important; color: white !important; box-shadow: 0 0 30px #ff0000; animation: shakeAnim .1s 3; }

    #status { height:30px; margin-bottom:15px; font-weight:800; color: #4fd1ff; text-transform: uppercase; letter-spacing: 1px;}

    #startBtn {
        padding:14px 45px; border:none; border-radius:35px;
        background:linear-gradient(90deg,#00f5ff,#ff00c8);
        color:white; font-weight:900; cursor:pointer; font-size: 16px;
        box-shadow: 0 5px 20px rgba(255, 0, 200, 0.4);
        transition: 0.3s;
    }
    #startBtn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(255, 0, 200, 0.6); }

    .hidden { display:none; }
    #highscore { margin-top:15px; opacity:.5; font-size:12px; font-weight: 800; }
</style>
</head>
<body>

<div class="bg-animation">
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
</div>

<div class="top-bar">
    <div class="brand">PATTERN MASTER PRO</div>
</div>

<div class="game-wrapper">
    <div id="info">LEVEL: <span id="level">1</span> | COMBO: <span id="combo">0</span></div>
    <div id="status">HAZIR MISIN?</div>

    <div id="grid">
        <div class="btn neon-up" data-dir="up">üöó</div>
        <div class="btn neon-right" data-dir="right">‚öΩÔ∏è</div>
        <div class="btn neon-left" data-dir="left">üçì</div>
        <div class="btn neon-down" data-dir="down">üíé</div>
    </div>

    <button id="startBtn">OYUNA BA≈ûLA</button>
    <div id="highscore">High Score: 0</div>
</div>

<script>
    const buttons = document.querySelectorAll(".btn");
    const grid = document.getElementById("grid");
    const levelEl = document.getElementById("level");
    const comboEl = document.getElementById("combo");
    const statusEl = document.getElementById("status");
    const startBtn = document.getElementById("startBtn");
    const highscoreEl = document.getElementById("highscore");

    let pattern = [];
    let playerIndex = 0;
    let level = 1;
    let combo = 0;
    let speed = 800;
    let isShowing = false;
    let gameActive = false;

    let highScore = localStorage.getItem("patternHigh") || 0;
    highscoreEl.innerText = "High Score: " + highScore;

    let audioCtx;

    function unlockAudio() {
        if (!audioCtx) {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        }
        if (audioCtx.state === "suspended") {
            audioCtx.resume();
        }
        const buffer = audioCtx.createBuffer(1, 1, 22050);
        const source = audioCtx.createBufferSource();
        source.buffer = buffer;
        source.connect(audioCtx.destination);
        source.start(0);
    }

    function playBeep(freq, duration = 0.15) {
        if (!audioCtx) return;
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();

        osc.type = "sine";
        osc.frequency.setValueAtTime(freq, audioCtx.currentTime);

        gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + duration);

        osc.connect(gain);
        gain.connect(audioCtx.destination);

        osc.start();
        osc.stop(audioCtx.currentTime + duration);
    }

    function randomDir() {
        const dirs = ["up", "down", "left", "right"];
        return dirs[Math.floor(Math.random() * 4)];
    }

    function flashButton(dir) {
        const btn = document.querySelector(`[data-dir='${dir}']`);
        btn.classList.add("active");
        setTimeout(() => btn.classList.remove("active"), Math.max(200, speed - 200));
    }

    async function showPattern() {
        isShowing = true;
        grid.classList.add("disabled");
        statusEl.innerText = "Dƒ∞KKATLE ƒ∞ZLE...";
        
        for (let i = 0; i < pattern.length; i++) {
            await new Promise(r => setTimeout(r, i === 0 ? 600 : speed / 2));
            flashButton(pattern[i]);
            playBeep(300 + (i * 40), 0.15);
            await new Promise(r => setTimeout(r, speed / 2));
        }
        
        isShowing = false;
        grid.classList.remove("disabled");
        statusEl.innerText = "SIRANI YAP!";
    }

    function startGame() {
        unlockAudio();
        gameActive = true;
        startBtn.classList.add("hidden");
        pattern = [];
        level = 1;
        combo = 0;
        speed = 800;
        nextRound();
    }

    function nextRound() {
        playerIndex = 0;
        pattern.push(randomDir());
        levelEl.innerText = level;
        comboEl.innerText = combo;
        showPattern();
    }

    function levelUp() {
        document.body.classList.add("flash");
        setTimeout(() => document.body.classList.remove("flash"), 100);
        playBeep(880, 0.2);

        statusEl.innerText = "M√úKEMMEL!";
        level++;
        speed = Math.max(300, speed - 50);

        setTimeout(nextRound, 800);
    }

    function gameOver(wrongBtn) {
        gameActive = false;
        document.body.classList.add("shake");
        setTimeout(() => document.body.classList.remove("shake"), 350);
        
        if(wrongBtn) {
            wrongBtn.classList.add("wrong");
            setTimeout(() => wrongBtn.classList.remove("wrong"), 500);
        }

        playBeep(120, 0.4);
        statusEl.innerText = "HATALI TU≈û!";
        
        if (level - 1 > highScore) {
            highScore = level - 1;
            localStorage.setItem("patternHigh", highScore);
            highscoreEl.innerText = "High Score: " + highScore;
        }

        setTimeout(() => {
            startBtn.classList.remove("hidden");
            startBtn.innerText = "TEKRAR DENE";
        }, 1200);
    }

    buttons.forEach(btn => {
        btn.addEventListener("pointerdown", (e) => {
            e.preventDefault();
            if (!gameActive || isShowing) return;

            const dir = btn.dataset.dir;
            flashButton(dir);
            playBeep(450, 0.1);

            if (dir === pattern[playerIndex]) {
                playerIndex++;
                combo++;
                comboEl.innerText = combo;

                if (playerIndex === pattern.length) {
                    levelUp();
                }
            } else {
                gameOver(btn);
            }
        });
    });

    startBtn.addEventListener("click", (e) => {
        e.preventDefault();
        startGame();
    });

    document.addEventListener("visibilitychange", () => {
        if (audioCtx && document.hidden) audioCtx.suspend();
        else if (audioCtx) audioCtx.resume();
    });
</script>

</body>
</html>
