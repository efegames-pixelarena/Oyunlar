<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Live Casino Blackjack Elite</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial}
html,body{height:100%;overflow:hidden;background:black;}

body{
background:
linear-gradient(rgba(0,0,0,.6),rgba(0,0,0,.85)),
url("https://images.unsplash.com/photo-1596838132731-3301c3fd4317?auto=format&fit=crop&w=1600&q=80");
background-size:cover;
background-position:center;
color:white;
}

:root{
--safe-top: env(safe-area-inset-top);
--safe-bottom: env(safe-area-inset-bottom);
}

.topBar{
position:absolute;top:0;left:0;width:100%;height:50px;
padding-top:var(--safe-top);
background:rgba(0,0,0,.7);
display:flex;justify-content:space-between;align-items:center;
padding-left:15px;padding-right:15px;z-index:10;
}

.table{
position:absolute;bottom:0;left:0;width:100%;height:60%;
background:radial-gradient(circle at center,#0b3d2e,#021a13);
border-top-left-radius:50% 25%;
border-top-right-radius:50% 25%;
box-shadow:0 -40px 100px black;
text-align:center;padding-top:25px;padding-bottom:var(--safe-bottom);
}

.hand{min-height:110px;margin-top:10px}

.card{
width:70px;height:100px;
background-size:cover;background-position:center;
border-radius:8px;display:inline-block;margin:5px;
animation:deal .5s ease;
}

@keyframes deal{
from{transform:translateX(-120px) rotate(-8deg);opacity:0}
to{transform:translateX(0);opacity:1}
}

.controls{margin-top:10px;}

.controls button{
padding:8px 15px;margin:5px;border:none;border-radius:6px;
background:#00ff88;color:black;font-weight:bold;cursor:pointer;
}

.controls button:disabled{background:#444;cursor:not-allowed;}

.betArea{margin-top:15px;}

.betBtn{
width:65px;height:65px;border-radius:50%;
background:radial-gradient(circle,#ffcc00,#b8860b);
display:inline-flex;align-items:center;justify-content:center;
font-weight:bold;cursor:pointer;margin:6px;
transition:.2s;
}

.betBtn.big{animation:chipPulse .4s ease;}
@keyframes chipPulse{
0%{transform:scale(1)}
50%{transform:scale(1.2)}
100%{transform:scale(1)}
}

.chat{
position:absolute;top:120px;right:15px;
max-width:180px;background:rgba(0,0,0,.65);
border-radius:12px;padding:8px 10px;
font-size:12px;display:inline-block;white-space:nowrap;
z-index:9;
}

.countdown{
position:absolute;top:50%;left:50%;
transform:translate(-50%,-50%);
font-size:70px;font-weight:bold;
color:#00ffcc;display:none;z-index:20;
}

.score{font-size:14px;margin-top:5px}
</style>
</head>

<body>

<div class="topBar">
<div>Bakiye: ₺<span id="balance">1000</span></div>
<div>Bahis: ₺<span id="bet">0</span></div>
</div>

<div class="countdown" id="countdown">5</div>
<div class="chat" id="chat">Canlı chat başlatıldı...</div>

<div class="table">

<h3>Dealer</h3>
<div id="dealerHand" class="hand"></div>
<div id="dealerScore" class="score"></div>

<h3>Oyuncu</h3>
<div id="playerHand" class="hand"></div>
<div id="playerScore" class="score"></div>

<div class="controls">
<button id="dealBtn" disabled onclick="startRound()">Dağıt</button>
<button id="hitBtn" disabled onclick="hit()">Hit</button>
<button id="standBtn" disabled onclick="stand()">Stand</button>
</div>

<div class="betArea">
<div class="betBtn" onclick="placeBet(20,this)">20₺</div>
<div class="betBtn" onclick="placeBet(50,this)">50₺</div>
<div class="betBtn" onclick="placeBet(100,this)">100₺</div>
<div class="betBtn" onclick="placeBet(500,this)">500₺</div>
<div class="betBtn" onclick="placeBet(1000,this)">1K</div>
<div class="betBtn" onclick="placeBet(2000,this)">2K</div>
</div>

</div>

<!-- SESLER -->
<audio id="dealSound" src="https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3"></audio>
<audio id="winSound" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
<audio id="bustSound" src="https://assets.mixkit.co/active_storage/sfx/2955/2955-preview.mp3"></audio>

<script>
let balance=1000
let bet=0
let player=[],dealer=[]
let deck=[]
let audioUnlocked=false

const dealSound=document.getElementById("dealSound")
const winSound=document.getElementById("winSound")
const bustSound=document.getElementById("bustSound")

function unlockAudio(){
if(!audioUnlocked){
dealSound.play().then(()=>{dealSound.pause();dealSound.currentTime=0})
audioUnlocked=true
}
}
document.body.addEventListener("click",unlockAudio,{once:true})

const suits=["S","H","D","C"]
const values=["A","2","3","4","5","6","7","8","9","0","J","Q","K"]

function buildDeck(){
deck=[]
for(let s of suits)
for(let v of values)
deck.push(v+s)
deck.sort(()=>Math.random()-0.5)
}
buildDeck()

function draw(){
dealSound.currentTime=0
dealSound.play()
return deck.pop()
}

function cardHTML(code){
return `<div class="card" style="background-image:url('https://deckofcardsapi.com/static/img/${code}.png')"></div>`
}

function value(c){
let v=c[0]
if(v=="A") return 11
if(["K","Q","J","0"].includes(v)) return 10
return parseInt(v)
}

function score(hand){
let total=0,aces=0
hand.forEach(c=>{
total+=value(c)
if(c[0]=="A")aces++
})
while(total>21&&aces>0){total-=10;aces--}
return total
}

function updateUI(){
document.getElementById("balance").innerText=balance
document.getElementById("bet").innerText=bet
}

function placeBet(amount,el){
if(balance>=amount){
balance-=amount
bet+=amount
updateUI()
document.getElementById("dealBtn").disabled=false

el.classList.add("big")
setTimeout(()=>el.classList.remove("big"),400)
}
}

async function startRound(){
document.getElementById("dealBtn").style.display="none"
await countdown()

player=[];dealer=[]
player.push(draw()); await delay(700)
dealer.push(draw()); await delay(700)
player.push(draw()); await delay(700)
dealer.push(draw())

render()

document.getElementById("hitBtn").disabled=false
document.getElementById("standBtn").disabled=false
}

function render(){
document.getElementById("playerHand").innerHTML=
player.map(c=>cardHTML(c)).join("")
document.getElementById("dealerHand").innerHTML=
dealer.map(c=>cardHTML(c)).join("")
document.getElementById("playerScore").innerText="Toplam: "+score(player)
document.getElementById("dealerScore").innerText="Toplam: "+score(dealer)
}

function hit(){
player.push(draw())
render()
if(score(player)>21){
bustSound.play()
stand()
}
}

function stand(){
while(score(dealer)<17)
dealer.push(draw())
render()
endRound()
}

function endRound(){
let p=score(player),d=score(dealer)

if(p==21&&player.length==2){
balance+=bet*4
winSound.play()
}
else if((p<=21&&p>d)||d>21){
balance+=bet*2
winSound.play()
}
else if(p>21){
bustSound.play()
}

bet=0
updateUI()

document.getElementById("hitBtn").disabled=true
document.getElementById("standBtn").disabled=true

setTimeout(()=>{
document.getElementById("playerHand").innerHTML=""
document.getElementById("dealerHand").innerHTML=""
document.getElementById("playerScore").innerText=""
document.getElementById("dealerScore").innerText=""
document.getElementById("dealBtn").style.display="inline-block"
document.getElementById("dealBtn").disabled=true
},2500)
}

function delay(ms){return new Promise(r=>setTimeout(r,ms))}

async function countdown(){
let cd=document.getElementById("countdown")
cd.style.display="block"
for(let i=5;i>0;i--){
cd.innerText=i
await delay(1000)
}
cd.style.display="none"
}

const messages=["Ali kazandı!","Büyük bahis geldi!","Jackpot artıyor!","Ayşe 21 yaptı!"]
setInterval(()=>{
let msg=messages[Math.floor(Math.random()*messages.length)]
document.getElementById("chat").innerText=msg
},3500)

updateUI()
</script>

</body>
</html>
