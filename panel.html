<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PixelArena Bonus</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;}

body{
background:linear-gradient(-45deg,#0b1023,#1a2a6c,#0d1333,#0a0f1f);
background-size:400% 400%;
animation:bgMove 15s ease infinite;
color:white;
overflow-x:hidden;
}
@keyframes bgMove{
0%{background-position:0% 50%}
50%{background-position:100% 50%}
100%{background-position:0% 50%}
}

/* TOP BAR */
.top-bar{
position:fixed;
top:0;width:100%;height:60px;
display:flex;align-items:center;justify-content:center;
background:linear-gradient(135deg,#1a2a6c,#16245c);
box-shadow:0 0 25px #00f5ff55;
z-index:1000;
}
.brand{
font-size:20px;
font-weight:900;
letter-spacing:1px;
background:linear-gradient(90deg,#00f5ff,#ffffff,#00f5ff);
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
animation:shine 3s linear infinite;
}
@keyframes shine{to{background-position:200% center;}}

/* PANEL */
.panel-container{margin-top:110px;padding:20px;padding-bottom:120px;}

.animated-btn{
position:relative;
padding:25px;
text-align:center;
border-radius:20px;
cursor:pointer;
font-size:18px;
font-weight:bold;
margin-bottom:25px;
background:#111936;
overflow:hidden;
}

.animated-btn::before{
content:"";
position:absolute;
top:-50%;left:-50%;
width:200%;height:200%;
background:conic-gradient(#ffb300,#00f5ff,#ff00ff,#ffb300);
animation:rotate 4s linear infinite;
z-index:-2;
}
.animated-btn::after{
content:"";
position:absolute;
inset:4px;
background:#141b3f;
border-radius:16px;
z-index:-1;
}
@keyframes rotate{100%{transform:rotate(360deg);}}

/* FOOTER */
.footer{
position:fixed;
bottom:0;
width:100%;
background:#0d1333;
text-align:center;
padding:12px;
font-size:13px;
border-top:1px solid #1e2a5a;
}

/* MODAL */
.modal{
position:fixed;top:0;left:0;
width:100%;height:100%;
background:rgba(0,0,0,0.8);
display:none;justify-content:center;align-items:center;
z-index:5000;
}
.modal-content{
background:linear-gradient(145deg,#1c2455,#12183c);
padding:30px;border-radius:25px;width:90%;max-width:420px;
position:relative;
box-shadow:0 0 40px #00f5ff55;
}
.close{
position:absolute;right:15px;top:10px;
cursor:pointer;font-size:18px;
}
.action-btn{
width:100%;padding:14px;border:none;border-radius:15px;
background:linear-gradient(90deg,#ffb300,#ff8c00);
font-weight:bold;cursor:pointer;
margin-top:15px;
}

/* PREMIUM NEON WHEEL */
.wheel-container{position:relative;width:280px;height:280px;margin:20px auto;}

#wheel{
width:100%;height:100%;
border-radius:50%;
border:10px solid #00f5ff;
box-shadow:
0 0 25px #00f5ff,
0 0 50px #00f5ff,
0 0 80px #9333ea;
transition:transform 4s cubic-bezier(0.17,0.67,0.83,0.67);
}

.pointer{
position:absolute;
top:-20px;
left:50%;
transform:translateX(-50%);
border-left:18px solid transparent;
border-right:18px solid transparent;
border-bottom:35px solid #ffb300;
filter:drop-shadow(0 0 10px #ffb300);
}
</style>
</head>
<body>

<div class="top-bar">
<div class="brand">PixelArena Bonus</div>
</div>

<div class="panel-container">
<div class="animated-btn" onclick="openModal('wheelModal')">
üé° G√úNL√úK √áARK √áEVƒ∞R
</div>

<div class="animated-btn" onclick="window.location.href='index.html'">
üè† ANA SAYFAYA D√ñN
</div>
</div>

<div class="footer">
¬© 2026 PixelArena
</div>

<!-- MODAL -->
<div class="modal" id="wheelModal">
<div class="modal-content">
<div class="close" onclick="closeModal('wheelModal')">‚úñ</div>
<h3 style="text-align:center;margin-bottom:15px;">VIP G√ºnl√ºk √áark</h3>
<div class="wheel-container">
<div class="pointer"></div>
<canvas id="wheel" width="280" height="280"></canvas>
</div>
<button class="action-btn" onclick="spinWheel()">√áevir</button>
</div>
</div>

<!-- SPIN SOUND -->
<audio id="spinSound" preload="auto">
<source src="https://assets.mixkit.co/sfx/preview/mixkit-slot-machine-wheel-1934.mp3" type="audio/mpeg">
</audio>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore, doc, getDoc, updateDoc, increment } 
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig={
apiKey:"AIzaSyBykwXCOJpX6rG0pUx93HmALjVcCQWVMYA",
authDomain:"emirhan-site.firebaseapp.com",
projectId:"emirhan-site",
storageBucket:"emirhan-site.firebasestorage.app",
messagingSenderId:"668871888390",
appId:"1:668871888390:web:76568bda84cb1641f7bd87"
};

const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getFirestore(app);

let currentUser=null;

onAuthStateChanged(auth,(user)=>{
if(!user){window.location="index.html";}
currentUser=user;
});

/* MODAL */
window.openModal=id=>document.getElementById(id).style.display="flex";
window.closeModal=id=>document.getElementById(id).style.display="none";

/* WHEEL DRAW */
const canvas=document.getElementById("wheel");
const ctx=canvas.getContext("2d");

const rewards=[50,100,500,1000];
const angle=2*Math.PI/rewards.length;

for(let i=0;i<rewards.length;i++){
ctx.beginPath();
ctx.moveTo(140,140);
ctx.arc(140,140,140,i*angle,(i+1)*angle);
ctx.fillStyle=i%2?"#00f5ff":"#9333ea";
ctx.fill();

ctx.save();
ctx.translate(140,140);
ctx.rotate(i*angle+angle/2);
ctx.fillStyle="white";
ctx.font="bold 20px Arial";
ctx.textAlign="center";
ctx.fillText(rewards[i]+"‚Ç∫",80,8);
ctx.restore();
}

let rotation=0;

window.spinWheel=async()=>{
const sound=document.getElementById("spinSound");
sound.currentTime=0;
await sound.play().catch(()=>{}); // iOS i√ßin user interaction sonrasƒ±

const index=Math.floor(Math.random()*rewards.length);
const prize=rewards[index];

rotation+=360*6+(360/rewards.length)*index;
canvas.style.transform=`rotate(${rotation}deg)`;

setTimeout(async()=>{
await updateDoc(doc(db,"users",currentUser.uid),{
balance:increment(prize)
});
alert(prize+"‚Ç∫ kazandƒ±n!");
closeModal("wheelModal");
},4000);
};
</script>

</body>
</html>
