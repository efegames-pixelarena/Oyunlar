<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Neon Drift | Demo Edition</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
<style>
:root { --p: #00f2ff; --a: #ff0055; --bg: #030508; --success: #00ff88; }
* { margin:0; padding:0; box-sizing:border-box; font-family: 'Orbitron', sans-serif; user-select: none; }

body { background: var(--bg); color: white; height: 100vh; overflow: hidden; }

/* Dinamik Yol Animasyonu */
#road {
    position: absolute; inset: 0;
    background: 
        linear-gradient(90deg, transparent 49%, rgba(0, 242, 255, 0.1) 50%, transparent 51%),
        linear-gradient(0deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
    background-size: 100% 100%, 100% 80px;
    z-index: 1;
}

/* UI Katmanı */
.hud {
    position: relative; z-index: 100; padding: 30px;
    display: flex; justify-content: space-between; align-items: flex-start;
}
.speed-display { text-align: center; }
.speed-num { font-size: 3rem; font-weight: 900; font-style: italic; line-height: 1; color: var(--p); }
.label { font-size: 0.7rem; letter-spacing: 3px; color: #555; }

/* Yarışmacılar */
.car {
    position: absolute; bottom: 80px; width: 50px; height: 90px;
    border-radius: 8px; border: 2px solid #fff; z-index: 10;
    transition: transform 0.1s;
}
#playerCar { left: 25%; background: var(--p); box-shadow: 0 0 30px var(--p); }
#enemyCar { right: 25%; background: var(--a); box-shadow: 0 0 30px var(--a); opacity: 0.8; }

/* Drift Zone (Senkronizasyon Hedefi) */
#drift-zone {
    position: absolute; width: 100%; height: 120px; left: 0; top: -150px;
    background: linear-gradient(transparent, rgba(255,255,255,0.2), transparent);
    border-top: 3px solid #fff; border-bottom: 3px solid #fff;
    display: flex; align-items: center; justify-content: center;
    z-index: 5; font-weight: 900; letter-spacing: 10px;
}

#msg {
    position: absolute; top: 50%; width: 100%; text-align: center;
    font-size: 1.5rem; font-weight: 900; z-index: 100; opacity: 0; transition: 0.2s;
}

.tutorial {
    position: fixed; bottom: 20px; width: 100%; text-align: center;
    color: #444; font-size: 0.7rem; z-index: 100;
}
</style>
</head>
<body>

<div id="road"></div>

<div class="hud">
    <div class="speed-display">
        <div class="label">SENİN HIZIN</div>
        <div class="speed-num" id="pSpeed">0</div>
        <div class="label">KM/H</div>
    </div>
    <div style="text-align: center;">
        <div class="label">MESAFE</div>
        <div id="dist" style="font-size: 1.2rem; font-weight: 900;">0m</div>
    </div>
    <div class="speed-display">
        <div class="label">RAKİP HIZI</div>
        <div class="speed-num" id="eSpeed" style="color: var(--a);">0</div>
        <div class="label">KM/H</div>
    </div>
</div>

<div id="drift-zone">DRIFT</div>
<div id="playerCar" class="car"></div>
<div id="enemyCar" class="car"></div>
<div id="msg">PERFECT!</div>

<div class="tutorial">ALAN ARABANIN ÜSTÜNDEYKEN EKRANA BASILI TUT!</div>

<script>
    let pSpeed = 0;
    let eSpeed = 0;
    let distance = 0;
    let isPressing = false;
    let driftActive = false;
    let zonePos = -150;
    let roadPos = 0;

    const driftZone = document.getElementById('drift-zone');
    const playerCar = document.getElementById('playerCar');
    const msg = document.getElementById('msg');

    function gameLoop() {
        // 1. Yol ve Bölge Hareketi
        zonePos += (pSpeed / 20) + 5;
        if (zonePos > window.innerHeight) {
            zonePos = -300; // Yeni bölge yukarıdan başlasın
        }
        driftZone.style.top = zonePos + 'px';

        // 2. Drift Kontrolü (Arabanın konumu window.innerHeight - 170 civarı)
        const carTop = window.innerHeight - 170;
        if (zonePos > carTop - 100 && zonePos < carTop + 50) {
            driftActive = true;
            driftZone.style.borderColor = 'var(--success)';
            driftZone.style.color = 'var(--success)';
        } else {
            driftActive = false;
            driftZone.style.borderColor = '#fff';
            driftZone.style.color = '#fff';
        }

        // 3. Hız Mantığı
        if (isPressing) {
            if (driftActive) {
                pSpeed += 1.5;
                updateMsg('PERFECT DRIFT!', 'var(--success)');
            } else {
                pSpeed -= 2;
                updateMsg('TOO EARLY!', 'var(--a)');
            }
        } else {
            pSpeed -= 0.3;
        }

        // 4. Yapay Zeka Rakip (Basit senkronizasyon simülasyonu)
        eSpeed += (Math.random() > 0.4 ? 0.8 : -0.5);
        
        // Sınırlandırmalar
        pSpeed = Math.max(0, Math.min(pSpeed, 420));
        eSpeed = Math.max(0, Math.min(eSpeed, 380));
        distance += pSpeed / 100;

        // 5. Görsel Güncellemeler
        document.getElementById('pSpeed').innerText = Math.floor(pSpeed);
        document.getElementById('eSpeed').innerText = Math.floor(eSpeed);
        document.getElementById('dist').innerText = Math.floor(distance) + "m";
        
        // Yol kayma efekti
        roadPos += pSpeed / 10;
        document.getElementById('road').style.backgroundPosition = `50% 0, 0 ${roadPos}px`;
        
        // Araba titreme efekti
        playerCar.style.transform = `translateX(${(Math.random()-0.5) * (pSpeed/50)}px) ${isPressing ? 'scale(1.1) skewX(-5deg)' : ''}`;

        requestAnimationFrame(gameLoop);
    }

    function updateMsg(txt, color) {
        msg.innerText = txt;
        msg.style.color = color;
        msg.style.opacity = isPressing ? 1 : 0;
    }

    // Giriş Kontrolleri
    window.addEventListener('touchstart', (e) => { e.preventDefault(); isPressing = true; });
    window.addEventListener('touchend', () => { isPressing = false; msg.style.opacity = 0; });
    window.addEventListener('mousedown', () => isPressing = true);
    window.addEventListener('mouseup', () => { isPressing = false; msg.style.opacity = 0; });

    // Başlat
    gameLoop();
</script>
</body>
</html>
