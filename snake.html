<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake.io Demo</title>
<style>
body, html { margin:0; padding:0; overflow:hidden; background:#222; }
canvas { display:block; background: #1e1e1e; }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
const W = canvas.width, H = canvas.height;
const MAP_SIZE = 5000;

let mySnake = { body:[{x:MAP_SIZE/2, y:MAP_SIZE/2}], dir:'RIGHT', speed:3, score:0, x:MAP_SIZE/2, y:MAP_SIZE/2 };
let inputDir = {x:1, y:0};

canvas.addEventListener("touchstart", handleTouch);
canvas.addEventListener("touchmove", handleTouch);
function handleTouch(e){
  e.preventDefault();
  const t = e.touches[0];
  const dx = t.clientX - W/2;
  const dy = t.clientY - H/2;
  const len = Math.sqrt(dx*dx+dy*dy);
  inputDir.x = dx/len;
  inputDir.y = dy/len;
}

let foods = [];
for(let i=0;i<50;i++){ foods.push({x:Math.random()*MAP_SIZE, y:Math.random()*MAP_SIZE}); }

let bots = [];
for(let i=0;i<10;i++){ bots.push({ body:[{x:Math.random()*MAP_SIZE, y:Math.random()*MAP_SIZE}], speed:2 }); }

function gameLoop(){
  // Update player
  mySnake.x += inputDir.x*mySnake.speed;
  mySnake.y += inputDir.y*mySnake.speed;
  mySnake.x = Math.max(0, Math.min(MAP_SIZE, mySnake.x));
  mySnake.y = Math.max(0, Math.min(MAP_SIZE, mySnake.y));
  mySnake.body.unshift({x:mySnake.x, y:mySnake.y});
  if(mySnake.body.length>10+mySnake.score/10) mySnake.body.pop();

  // Update bots
  bots.forEach(bot=>{
    let head = bot.body[0];
    let target = foods[Math.floor(Math.random()*foods.length)];
    let dx = target.x-head.x, dy = target.y-head.y, len=Math.sqrt(dx*dx+dy*dy);
    dx/=len; dy/=len;
    bot.body.unshift({x:head.x+dx*bot.speed, y:head.y+dy*bot.speed});
    if(bot.body.length>10) bot.body.pop();
  });

  render();
  requestAnimationFrame(gameLoop);
}

function render(){
  ctx.clearRect(0,0,W,H);
  const camX = mySnake.x - W/2;
  const camY = mySnake.y - H/2;

  // Foods
  ctx.fillStyle = "red";
  foods.forEach(f=>ctx.fillRect(f.x-camX,f.y-camY,10,10));

  // Bots
  ctx.fillStyle="green";
  bots.forEach(bot=>{
    bot.body.forEach(s=>ctx.fillRect(s.x-camX, s.y-camY, 10,10));
  });

  // Player
  ctx.fillStyle="yellow";
  mySnake.body.forEach(s=>ctx.fillRect(s.x-camX, s.y-camY, 10,10));
}

gameLoop();
</script>
</body>
</html>
