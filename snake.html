<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake.io Test Offline</title>
<style>
body, html { margin:0; padding:0; overflow:hidden; background:#1e1e1e; font-family:sans-serif;}
canvas { display:block; }
#totalScore {
  position:fixed; top:10px; left:10px;
  color:white; background:rgba(0,0,0,0.6);
  padding:10px; border-radius:8px; font-size:16px;
}
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="totalScore">Score: 0</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
let W = window.innerWidth, H = window.innerHeight;
canvas.width = W; canvas.height = H;

let MAP_SIZE = 5000;
let MAX_FOODS = 50;

let mySnake = { body:[{x:2500,y:2500}], x:2500, y:2500, speed:5, score:0, color:"#ffff00" };
let foods = [];

let inputDir = {x:0, y:0};

for(let i=0;i<MAX_FOODS;i++){
  foods.push({ x:Math.random()*MAP_SIZE, y:Math.random()*MAP_SIZE });
}

document.addEventListener("keydown", (e)=>{
  switch(e.key){
    case "ArrowUp": inputDir = {x:0, y:-1}; break;
    case "ArrowDown": inputDir = {x:0, y:1}; break;
    case "ArrowLeft": inputDir = {x:-1, y:0}; break;
    case "ArrowRight": inputDir = {x:1, y:0}; break;
  }
});

function gameLoop(){
  // Hareket
  mySnake.x += inputDir.x * mySnake.speed;
  mySnake.y += inputDir.y * mySnake.speed;
  mySnake.body.unshift({x:mySnake.x, y:mySnake.y});
  if(mySnake.body.length>10+mySnake.score) mySnake.body.pop();

  // Yem kontrol
  foods.forEach((f,i)=>{
    if(Math.hypot(f.x-mySnake.x, f.y-mySnake.y)<15){
      mySnake.score++;
      foods[i] = { x:Math.random()*MAP_SIZE, y:Math.random()*MAP_SIZE };
    }
  });

  // Render
  ctx.fillStyle = "#1e1e1e";
  ctx.fillRect(0,0,W,H);

  let camX = mySnake.x - W/2;
  let camY = mySnake.y - H/2;

  // Yemler
  ctx.fillStyle="red";
  foods.forEach(f=> ctx.fillRect(f.x-camX-5,f.y-camY-5,10,10));

  // YÄ±lan
  mySnake.body.forEach((seg,i)=>{
    ctx.fillStyle = i===0?mySnake.color:"#ffff66";
    ctx.beginPath();
    ctx.arc(seg.x-camX, seg.y-camY, 10,0,Math.PI*2);
    ctx.fill();
  });

  document.getElementById("totalScore").innerText = "Score: "+mySnake.score;
  requestAnimationFrame(gameLoop);
}

requestAnimationFrame(gameLoop);
</script>
</body>
</html>
