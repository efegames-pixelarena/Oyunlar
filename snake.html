<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Snake.io Clone Preview</title>
<style>
body, html { margin:0; padding:0; overflow:hidden; background:#181818; font-family:sans-serif; }
canvas { display:block; background:#2b2b2b; }
#scoreboard {
  position: fixed;
  top: 10px; right: 10px;
  color: white;
  background: rgba(0,0,0,0.6);
  padding: 10px;
  border-radius: 8px;
  font-size: 14px;
  max-height: 90vh;
  overflow-y:auto;
}
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="scoreboard"></div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
let W = window.innerWidth, H = window.innerHeight;
canvas.width = W; canvas.height = H;

const MAP_SIZE = 5000;
let camera = {x:0, y:0};
let mySnake = { 
  body:[{x:MAP_SIZE/2, y:MAP_SIZE/2}], 
  dir: 'RIGHT', 
  speed: 4, 
  score: 0 
};
let foods = [];
const MAX_FOODS = 100;
const scoreboard = document.getElementById("scoreboard");

function randomFood(){
  return { x: Math.random()*MAP_SIZE, y: Math.random()*MAP_SIZE, type: Math.random()<0.2?"red":"green" };
}

// Spawn foods
for(let i=0;i<MAX_FOODS;i++) foods.push(randomFood());

// Input
let inputDir = {x:1, y:0};
window.addEventListener("keydown", e=>{
  if(e.key==="ArrowUp" && inputDir.y!==1){ inputDir={x:0,y:-1}; }
  if(e.key==="ArrowDown" && inputDir.y!==-1){ inputDir={x:0,y:1}; }
  if(e.key==="ArrowLeft" && inputDir.x!==1){ inputDir={x:-1,y:0}; }
  if(e.key==="ArrowRight" && inputDir.x!==-1){ inputDir={x:1,y:0}; }
});

// Touch for mobile swipe
let touchStart = null;
canvas.addEventListener("touchstart", e=>{ touchStart=e.touches[0]; });
canvas.addEventListener("touchmove", e=>{
  if(!touchStart) return;
  const touch = e.touches[0];
  const dx = touch.clientX - touchStart.clientX;
  const dy = touch.clientY - touchStart.clientY;
  if(Math.abs(dx)>Math.abs(dy)){
    inputDir = dx>0 ? {x:1,y:0} : {x:-1,y:0};
  }else{
    inputDir = dy>0 ? {x:0,y:1} : {x:0,y:-1};
  }
});

// Game loop
function gameLoop(){
  updateSnake();
  render();
  requestAnimationFrame(gameLoop);
}

function updateSnake(){
  const head = {...mySnake.body[0]};
  head.x += inputDir.x*mySnake.speed;
  head.y += inputDir.y*mySnake.speed;

  // Keep inside map
  head.x = Math.max(0, Math.min(MAP_SIZE, head.x));
  head.y = Math.max(0, Math.min(MAP_SIZE, head.y));

  mySnake.body.unshift(head);
  if(mySnake.body.length>10+mySnake.score/10) mySnake.body.pop();

  // Eat foods
  foods.forEach((f,i)=>{
    const dist = Math.hypot(f.x-head.x,f.y-head.y);
    if(dist<20){
      mySnake.score += (f.type==="red"?30:10);
      foods[i] = randomFood();
      // Yem yeme sesi
      const audio = new Audio("https://freesound.org/data/previews/341/341695_6242976-lq.mp3");
      audio.play();
    }
  });

  // Update camera
  camera.x = head.x - W/2;
  camera.y = head.y - H/2;
}

function render(){
  // Background grid (Snake.io tarzÄ±)
  const gridSize = 50;
  ctx.fillStyle="#181818";
  ctx.fillRect(0,0,W,H);
  ctx.strokeStyle="#222";
  ctx.lineWidth=1;
  for(let x=-camera.x%gridSize;x<W;x+=gridSize){
    ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,H); ctx.stroke();
  }
  for(let y=-camera.y%gridSize;y<H;y+=gridSize){
    ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(W,y); ctx.stroke();
  }

  // Draw foods
  foods.forEach(f=>{
    ctx.font="20px Arial";
    ctx.fillText(f.type==="red"?"ðŸŽ":"ðŸ", f.x-camera.x, f.y-camera.y);
  });

  // Draw snake
  mySnake.body.forEach((seg,i)=>{
    ctx.fillStyle = i===0 ? "#ffff00" : "#00ff00";
    ctx.beginPath();
    ctx.arc(seg.x-camera.x, seg.y-camera.y, 10,0,Math.PI*2);
    ctx.fill();
  });

  // Update scoreboard
  scoreboard.innerHTML = "Skor: "+Math.floor(mySnake.score);
}

gameLoop();
</script>
</body>
</html>
