<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SkyCrash</title>

<style>
body{
margin:0;
background:#050b14;
font-family:Arial, sans-serif;
color:white;
text-align:center;
overflow:hidden;
}

header{
display:flex;
justify-content:space-between;
padding:15px;
font-size:22px;
font-weight:bold;
background:#0f1724;
}

.crashArea{
position:relative;
height:55vh;
background:radial-gradient(circle at center, #3b0066 0%, #0a0f1c 70%);
display:flex;
align-items:center;
justify-content:center;
overflow:hidden;
}

#multiplier{
font-size:70px;
font-weight:bold;
z-index:2;
transition:0.1s;
}

#plane{
position:absolute;
width:95px;
bottom:40px;
left:10%;
transition:transform 0.05s linear;
filter:drop-shadow(0 0 15px red);
}

#countdown{
position:absolute;
top:15px;
font-size:22px;
opacity:0.9;
}

.betSection{
position:fixed;
bottom:0;
width:100%;
background:#0f1724;
padding:20px;
box-sizing:border-box;
}

.betControls{
display:flex;
justify-content:center;
align-items:center;
gap:20px;
margin-bottom:15px;
}

.betControls button{
width:50px;
height:50px;
border-radius:50%;
border:none;
background:#1f2937;
color:white;
font-size:22px;
}

#betAmount{
font-size:26px;
width:100px;
text-align:center;
background:none;
border:none;
color:white;
}

#betBtn{
width:90%;
padding:15px;
border-radius:15px;
border:none;
background:#4caf50;
font-size:22px;
font-weight:bold;
color:white;
transition:0.2s;
}
</style>
</head>
<body>

<header>
<div>✈️ SkyCrash</div>
</header>

<div class="crashArea">
<div id="countdown"></div>
<div id="multiplier">1.00x</div>
<img id="plane" src="https://i.imgur.com/7Qp7YQK.png">
</div>

<div class="betSection">
<div class="betControls">
<button onclick="changeBet(-10)">-</button>
<input id="betAmount" value="100">
<button onclick="changeBet(10)">+</button>
</div>
<button id="betBtn">Bahis Yap</button>
</div>

<script>

let currentMultiplier = 1
let crashPoint = 0
let interval = null
let bettingOpen = false
let hasBet = false
let betAmount = 0
let cashedOut = false

const multiplierEl = document.getElementById("multiplier")
const plane = document.getElementById("plane")
const countdownEl = document.getElementById("countdown")
const betBtn = document.getElementById("betBtn")

function changeBet(val){
let input = document.getElementById("betAmount")
let newVal = Math.max(10, parseInt(input.value) + val)
input.value = newVal
}

betBtn.onclick = async function(){

if(!bettingOpen) return

// BAHİS YAP
if(!hasBet){

betAmount = parseInt(document.getElementById("betAmount").value)

let result = await window.oynaVeBakiyedenDus(betAmount)

if(!result) return

hasBet = true
cashedOut = false

betBtn.innerText = "Cash Out"
betBtn.style.background = "#ff9800"

}
// CASHOUT
else{

if(cashedOut) return

let win = Math.floor(betAmount * currentMultiplier)

await window.bakiyeArttir(win)

cashedOut = true
hasBet = false

betBtn.innerText = "Bahis Yap"
betBtn.style.background = "#4caf50"

}

}

function startRound(){

bettingOpen = false
currentMultiplier = 1
multiplierEl.innerText = "1.00x"
plane.style.transform = "translate(0px,0px) rotate(0deg)"

crashPoint = (Math.random()*4 + 1).toFixed(2)

interval = setInterval(()=>{

currentMultiplier += 0.03 + (currentMultiplier*0.002)

multiplierEl.innerText = currentMultiplier.toFixed(2) + "x"

let moveX = currentMultiplier * 22
let moveY = currentMultiplier * 12

plane.style.transform =
`translate(${moveX}px,-${moveY}px) rotate(25deg) scale(${1 + currentMultiplier/25})`

if(currentMultiplier >= crashPoint){

clearInterval(interval)

hasBet = false
betBtn.innerText = "Bahis Yap"
betBtn.style.background = "#4caf50"

setTimeout(startCountdown,1000)

}

},100)

}

function startCountdown(){

let time = 5
bettingOpen = false
countdownEl.innerText = time + " SN"

let cd = setInterval(()=>{
time--
countdownEl.innerText = time + " SN"

if(time <= 0){
clearInterval(cd)
countdownEl.innerText = ""
bettingOpen = true
startRound()
}

},1000)

}

startCountdown()

</script>
</body>
</html>
